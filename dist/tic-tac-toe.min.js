!function(){"use strict";angular.module("ticTacToe",[])}(),function(){"use strict";function e(){var e=this;return e.lossMessages=["AW SHUCKS!","I GOT DISTRACTED...","HOW IN THE?!","ARE YOU CHEATING?","I BET YOU WON'T WIN AGAIN.","WE ALL GET LUCKY.","DOUBLE OR NOTHING.","REMATCH?","BEGINNER'S LUCK!"],e.tieMessages=["CAT!","WE TIED!","UGH THIS AGAIN.","YOU PLAY LIKE A COWARD!","WE TIED AGAIN!"],e.winMessages=["HAHA LOSER!","NEXT!","*YAWN*","THAT WAS CUTE.","IS THAT ALL YOU'VE GOT?"],e.getLossMessage=function(){return e.selectMessage(e.lossMessages)},e.getTieMessage=function(){return e.selectMessage(e.tieMessages)},e.getWinMessage=function(){return e.selectMessage(e.winMessages)},e.selectMessage=function(e){var t=Math.random();return e[Math.round(t*e.length)]},e.reset=function(){},e.reset(),e}angular.module("ticTacToe").service("MessageService",e),e.$inject=[]}(),function(){"use strict";function e(){var e=this;function n(e,t){var n=this;n.points=t,n.where=e,n.getPoints=function(){return this.points},n.getWhere=function(){return this.where}}return e.getMove=function(e,t){return new n(e,t)},e.reset=function(){},e.reset(),e}angular.module("ticTacToe").service("MoveService",e),e.$inject=[]}(),function(){"use strict";function e(a){var u=this;function s(e,t,n,r){var s=this;s.children=[],s.move=void 0===n?null:n,s.parent=void 0===r?null:r,s.cells=e,s.value=t,s.expand=function(){for(var e=a.getAvailableMoves(this.cells),t=a.getOtherValue(this.value),n=e.length,r=0;r<n;r++){var s=e[r],i=angular.copy(this.cells);i[s]=this.value;var c=u.getNode(i,t,s,this);this.children.push(c)}for(var o=this.children.length,l=0;l<o;l++){null===a.getWinner(this.children[l].getCells())&&this.children[l].expand()}},s.getCells=function(){return this.cells},s.getMove=function(){return this.move},s.getPoints=function(e){var t=0,n=a.getWinner(this.getCells());if(null!==n)return t=n===e?1:n===a.getOtherValue(e)?-1:0;for(var r=this.children.length,s=0;s<r;s++){t+=this.children[s].getPoints(e)}return t}}return u.getNode=function(e,t,n,r){return new s(e,t,n,r)},u.reset=function(){},u.reset(),u}angular.module("ticTacToe").service("NodeService",e),e.$inject=["TicTacToeService"]}(),function(){"use strict";function e(r,a){var u=this;return u.getTree=function(){return u.tree},u.makeMove=function(e,t,n){return r.resolve().then(function(){return u.makeHardMove(e,t)})},u.makeHardMove=function(e,t){u.tree=a.getTree(t,e),u.tree.expand();for(var n=u.tree.getMoves(),r=n.length,s=null,i=Number.NEGATIVE_INFINITY,c=0;c<r;c++){var o=n[c],l=o.getPoints();i<l&&(s=o.getWhere(),i=o.getPoints())}return s},u.makeEasyMove=function(e,t){for(;;){var n=Math.round(9*Math.random());if(-1===t[n]&&t[n]!==e)return n}},u.reset=function(){u.tree={}},u.reset(),u}angular.module("ticTacToe").service("OpponentService",e),e.$inject=["$q","TreeService"]}(),function(){"use strict";function e(){var e=this;return e.getAvailableMoves=function(e){for(var t=[],n=0;n<9;n++)-1===e[n]&&t.push(n);return t},e.getWinner=function(e){{if(-1!==e[0]&&e[0]===e[1]&&e[1]===e[2])return e[0];if(-1!==e[3]&&e[3]===e[4]&&e[4]===e[5])return e[3];if(-1!==e[6]&&e[6]===e[7]&&e[7]===e[8])return e[6]}{if(-1!==e[0]&&e[0]===e[3]&&e[3]===e[6])return e[0];if(-1!==e[1]&&e[1]===e[4]&&e[4]===e[7])return e[1];if(-1!==e[2]&&e[2]===e[5]&&e[5]===e[8])return e[2]}{if(-1!==e[0]&&e[0]===e[4]&&e[4]===e[8])return e[0];if(-1!==e[2]&&e[2]===e[4]&&e[4]===e[6])return e[2]}for(var t=0;t<9;t++)if(-1===e[t])return null;return-1},e.getOtherValue=function(e){return 1===e?0:1},e.reset=function(){},e.reset(),e}angular.module("ticTacToe").service("TicTacToeService",e),e.$inject=[]}(),function(){"use strict";function e(c,r){function n(e,t){var n=this;n.parentNode=r.getNode(e,t),n.expand=function(){n.parentNode.expand()},n.getMoves=function(){for(var e=[],t=this.parentNode.children.length,n=0;n<t;n++){var r=this.parentNode.children[n],s=r.getPoints(this.parentNode.value),i=c.getMove(r.getMove(),s);e.push(i)}return e}}return this.getTree=function(e,t){return new n(e,t)},this.reset=function(){},this.reset(),this}angular.module("ticTacToe").service("TreeService",e),e.$inject=["MoveService","NodeService"]}(),function(){"use strict";function e(e,t,n){var r=this;t.$watch("cells",function(e){r.cells=e}),t.$watch("onClick",function(e){r.onClick=e}),t.$watch("userValue",function(e){r.opponentValue=n.getOtherValue(e),r.userValue=e}),r.click=function(e){r.onClick(e)},r.reset=function(){},r.init=function(){r.reset()},r.init()}angular.module("ticTacToe").controller("BoardController",e),e.$inject=["OpponentService","$scope","TicTacToeService"]}(),function(){"use strict";angular.module("ticTacToe").directive("board",function(){return{controller:"BoardController",controllerAs:"ctrl",restrict:"E",scope:{cells:"=",onClick:"=",userValue:"="},template:"<div class=\"board row\"><div data-ng-repeat=\"cell in ctrl.cells track by $index\" class=\"col-4 cell\" data-ng-class=\"{ 'empty-cell': cell === -1, 'opponent-x-cell': cell === 0 && ctrl.opponentValue === 0, 'opponent-o-cell': cell === 1 && ctrl.opponentValue === 1, 'user-x-cell': cell === 0 && ctrl.userValue === 0, 'user-o-cell': cell === 1 && ctrl.userValue === 1 }\" data-ng-click=\"ctrl.click($index)\"></div></div>"}})}(),function(){"use strict";function e(e,t){var n=this;t.$watch(function(){return e.getTree()},function(e){n.tree=e}),n.reset=function(){},n.init=function(){n.reset()},n.init()}angular.module("ticTacToe").controller("GameTreeController",e),e.$inject=["OpponentService","$scope"]}(),function(){"use strict";angular.module("ticTacToe").directive("gameTree",function(){return{controller:"GameTreeController",controllerAs:"ctrl",restrict:"E",scope:{},template:'<div><div class="row"><board class="col" cells="ctrl.tree.parentNode.cells" user-value="ctrl.tree.parentNode.value"></board></div><div class="row" data-ng-repeat="child in ctrl.tree.parentNode.children"><div class="col"><board cells="child.cells" user-value="ctrl.tree.parentNode.value"></board></div></div></div>'}})}(),function(){"use strict";function e(t,e,n){var r=this;r.beginOpponentsTurn=function(){return e.makeMove(r.opponentValue,r.cells).then(function(e){null!==e&&(r.cells[e]=r.opponentValue,r.switchTurn())})},r.beginUsersTurn=function(){r.showMessage(!1,"IT IS YOUR TURN.")},r.select=function(e){r.isGameOver?r.showMessage(!1,"THE GAME IS ALREADY OVER."):r.isUsersTurn?-1===r.cells[e]?(r.cells[e]=r.userValue,r.switchTurn()):r.showMessage(!1,"YOU CANNOT GO THERE!"):r.showMessage(!1,"SIMMER DOWN! IT'S MY TURN STILL!")},r.setOrder=function(){Math.floor(100*Math.random())%2==0?(r.opponentValue=0,r.userValue=1,r.isUsersTurn=!0):(r.opponentValue=1,r.userValue=0,r.isUsersTurn=!1)},r.showMessage=function(e,t){$(e?".user":".opponent").attr("data-content",t).popover("show")},r.start=function(){r.setOrder(),r.isUsersTurn?r.beginUsersTurn():r.beginOpponentsTurn()},r.switchTurn=function(){var e=n.getWinner(r.cells);e===r.opponentValue?(r.isGameOver=!0,r.showMessage(!1,t.getWinMessage())):e===r.userValue?(r.isGameOver=!0,r.showMessage(!1,t.getLossMessage())):-1===e?(r.isGameOver=!0,r.showMessage(!1,t.getTieMessage())):(r.isUsersTurn=!r.isUsersTurn,r.isUsersTurn?r.beginUsersTurn():r.beginOpponentsTurn())},r.reset=function(){r.cells=[-1,-1,-1,-1,-1,-1,-1,-1,-1],r.isGameOver=!1,r.opponentValue=1,r.stats=!1,r.userValue=0,r.isUsersTurn=!1},r.init=function(){r.reset(),r.start()},r.init()}angular.module("ticTacToe").controller("TicTacToeController",e),e.$inject=["MessageService","OpponentService","TicTacToeService"]}(),function(){"use strict";angular.module("ticTacToe").directive("ticTacToe",function(){return{controller:"TicTacToeController",controllerAs:"ctrl",restrict:"E",scope:{},template:'<div class="global"><div class="players row"><a class="opponent col-6" tabindex="0" data-content data-placement="right" data-toggle="popover" data-trigger="focus"><img src="img/opponent.png"></a> <a class="user col-6" tabindex="1" data-content data-placement="left" data-toggle="popover" data-trigger="focus"><img src="img/user.png"></a></div><board cells="ctrl.cells" on-click="ctrl.select" user-value="ctrl.userValue"></board><game-tree></game-tree></div>'}})}();
//# sourceMappingURL=tic-tac-toe.min.js.map
